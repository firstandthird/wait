/*!
 * wait - Javascript plugin to show an iOS style loading graphic.
 * v0.3.0
 * https://github.com/firstandthird/wait
 * copyright First + Third 2013
 * MIT License
*/
!function(a){a.declare("wait",{defaults:{title:"Loading...",preventClicks:!0,theme:"dark",onShow:a.noop,onHide:a.noop,overlayTemplate:'<div class="wait-overlay"></div>',modalTemplate:'<div class="wait"></div>'},show:function(a){this.setOptions(a),this.preventClicks&&this.el.addClass("wait-blur"),this._createOverlay(),this._createModal(),this._bindEvents(),this.onShow.call(this),this.emit("show")},hide:function(){this._unbindEvents(),this.preventClicks&&this.el.removeClass("wait-blur"),this._removeModal(),this._removeOverlay(),this.onHide.call(this),this.emit("hide")},setOptions:function(a){a=a||{},this.title=a.title||this.title,"undefined"!=typeof a.preventClicks&&(this.preventClicks=a.preventClicks),this.theme=a.theme||this.theme,this.onShow=a.onShow||this.onShow,this.onHide=a.onHide||this.onHide},setText:function(a){this.paragraph.text(a)},_createOverlay:function(){this.overlay=a(this.overlayTemplate).addClass("wait-"+this.theme).appendTo("body"),this._positionOverlay()},_removeOverlay:function(){this.overlay.remove()},_positionOverlay:function(){var a="0px",b="0px",c="100%",d="100%",e="fixed";if("body"!==this.el[0].nodeName.toLowerCase()){var f=this.el[0].getBoundingClientRect();a=f.left+"px",b=f.top+"px",c=f.width+"px",d=f.height+"px",e="absolute"}this.overlay.css({width:c,height:d,left:a,top:b,position:e})},_createModal:function(){this.modal=a(this.modalTemplate).addClass("wait-"+this.theme).appendTo("body"),this.paragraph=a("<p></p>").text(this.title).appendTo(this.modal),this._positionModal()},_removeModal:function(){this.modal.remove()},_positionModal:function(){var a,b,c="fixed";"body"!==this.el[0].nodeName.toLowerCase()&&(c="absolute");var d=this.el[0].getBoundingClientRect();a=Math.round((d.width-this.modal[0].offsetWidth)/2+d.left),b=Math.round((d.height-this.modal[0].offsetHeight)/2+d.top),this.modal[0].style.left=a+"px",this.modal[0].style.top=b+"px",this.modal[0].style.position=c},_bindEvents:function(){this.preventClicks&&this.overlay.on("click",this._preventClick)},_unbindEvents:function(){this.preventClicks&&this.overlay.off("click",this._preventClick)},_preventClick:function(){return!1}})}(jQuery);